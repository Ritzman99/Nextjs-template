// _theme-variables.scss
// Theme variable system: apply-theme mixin + theme-color function
// Works with scss/themes/_dark.scss and _light.scss
@use 'sass:map';

/// Emits CSS custom properties from a theme map.
/// Each map key becomes --theme-{key}
@mixin apply-theme($theme-map) {
  @each $key, $value in $theme-map {
    --theme-#{$key}: #{$value};
  }
}

/// Maps semantic/legacy names to --theme-* CSS variables.
/// Use only new theme names in components; aliases support migration.
@function theme-color($key) {
  $alias-map: (
    // Layout
    'background': 'background',
    'bg-primary': 'background',
    'foreground': 'foreground',
    'text-primary': 'foreground',
    'divider': 'divider',
    'focus': 'focus',
    'border-default': 'divider',
    'border-focus': 'focus',
    'focus-ring': 'focus',
    'border-subtle': 'divider',

    // Content / surfaces
    'surface': 'content1',
    'surface-secondary': 'content2',
    'surface-hover': 'content3',
    'hover-overlay': 'content3',

    // Text
    'text-secondary': 'default-500',
    'text-muted': 'default-400',
    'text-inverse': 'foreground',

    // Semantic colors (btn-* â†’ base color; text uses foreground)
    'btn-primary-bg': 'primary',
    'btn-primary-color': 'foreground',
    'btn-secondary-bg': 'secondary',
    'btn-secondary-color': 'foreground',
    'btn-success-bg': 'success',
    'btn-success-color': 'foreground',
    'btn-warning-bg': 'warning',
    'btn-warning-color': 'foreground',
    'btn-danger-bg': 'danger',
    'btn-danger-color': 'foreground',

    // Gradients / hover
    'primary-hover': 'primary-400',
    'bg-gradient-start': 'content1',
    'bg-gradient-end': 'content2',
  );

  $resolved: $key;
  @if map.has-key($alias-map, $key) {
    $resolved: map.get($alias-map, $key);
  }

  @return var(--theme-#{$resolved});
}
